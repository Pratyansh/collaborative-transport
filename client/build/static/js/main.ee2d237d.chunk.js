(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{42:function(e,t,a){e.exports=a(72)},47:function(e,t,a){},48:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(21),s=a.n(r),c=(a(47),a(3)),i=a(4),o=a(6),m=a(5),p=(a(48),a(10)),d=a(2),u=a(23),h=a(17),v=a.n(h),b=function(e){e?v.a.defaults.headers.common.Authorization=e:delete v.a.defaults.headers.common.Authorization},g=function(){return function(e){localStorage.removeItem("jwtToken"),b(!1),e(f({}))}},f=function(e){return{type:"SET_CURRENT_USER",payload:e}},E=a(7),y=a(16),w=a(39),x=a(18),N=a(70),S={isAuthenticated:!1,user:{},loading:!1},j={},O={shipments:null},k=Object(y.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(x.a)(Object(x.a)({},e),{},{isAuthenticated:!N(t.payload),user:t.payload});case"USER_LOADING":return Object(x.a)(Object(x.a)({},e),{},{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}},shipments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_SHIPMENTS":return Object(x.a)(Object(x.a)({},e),{},{shipments:t.payload});default:return e}}}),C=[w.a],R=Object(y.e)(k,{},Object(y.d)(y.a.apply(void 0,C))),T=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).onLogoutClick=function(t){t.preventDefault(),e.props.logoutUser()},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.auth.user;return l.a.createElement("div",{className:"navbar-fixed"},l.a.createElement("nav",{className:"z-depth-0"},l.a.createElement("div",{className:"nav-wrapper bg-green-500 flex flex-row justify-between"},l.a.createElement("div",null,l.a.createElement(p.b,{to:"/",style:{fontFamily:"monospace"},className:"absolute inline-block left-0 ml-12"},l.a.createElement("div",{className:"font-light bg-green-600 p-2 inline text-xl text-white shadow-md"},"Truck-Truck-Go"))),e.name&&l.a.createElement("div",{className:"inline-block mr-12"},l.a.createElement("button",{onClick:this.onLogoutClick,className:"btn w-32 waves-effect waves-light hover:shadow-lg hover:bg-green-700 rounded-md bg-green-600 accent-3"},"Logout")))))}}]),a}(n.Component),D=Object(E.b)((function(e){return{auth:e.auth}}),{logoutUser:g})(T),A=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{style:{height:"75vh"},className:"container valign-wrapper"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12 center-align"},l.a.createElement("h4",null,l.a.createElement("span",{style:{fontFamily:"monospace"}},"Collaborative-Transportation")),l.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"Create/Opt-in shipments in your own authenticated personal space"),l.a.createElement("br",null),l.a.createElement("div",{className:"col s6"},l.a.createElement(p.b,{to:"/register",style:{width:"140px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large waves-effect waves-light hover:shadow-lg hover:bg-green-700 bg-green-600 accent-3"},"Register")),l.a.createElement("div",{className:"col s6"},l.a.createElement(p.b,{to:"/login",style:{width:"140px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large btn-flat waves-effect bg-gray-300 hover:bg-gray-400 black-text"},"Log In")))))}}]),a}(n.Component),F=a(15),_=a(13),L=a.n(_),U=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(F.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};e.props.loginUser(a)},e.state={email:"",password:"",errors:{}},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return l.a.createElement("div",{className:"container"},l.a.createElement("div",{style:{marginTop:"4rem"},className:"row"},l.a.createElement("div",{className:"col s8 offset-s2 flex flex-col"},l.a.createElement("div",{className:"col s12"},l.a.createElement("h4",null,l.a.createElement("b",null,"Login")," below"),l.a.createElement("p",{className:"grey-text text-darken-1"},"Don't have an account? ",l.a.createElement(p.b,{to:"/register"},l.a.createElement("b",null,"Register")))),l.a.createElement("div",{className:"self-center w-3/4"},l.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:L()("",{invalid:e.email||e.emailnotfound})}),l.a.createElement("label",{htmlFor:"email"},"Email"),l.a.createElement("span",{className:"red-text"},e.email,e.emailnotfound)),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:L()("",{invalid:e.password||e.passwordincorrect})}),l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("span",{className:"red-text"},e.password,e.passwordincorrect)),l.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},l.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hover:shadow-lg hover:bg-green-700 bg-green-600 accent-3"},"Login")))))))}}]),a}(n.Component),I=Object(E.b)((function(e){return{auth:e.auth,errors:e.errors}}),{loginUser:function(e){return function(t){v.a.post("/api/users/login",e).then((function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),b(a);var n=Object(u.a)(a);t(f(n))})).catch((function(e){t({type:"GET_ERRORS",payload:e.response.data})}))}}})(U),P=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(F.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={destination:e.state.destination,filledSpace:e.state.filledSpace,availableSpace:e.state.availableSpace,dispatchDate:e.state.dispatchDate};e.props.addShipment(a,e.props.history)},e.state={destination:"",filledSpace:"",availableSpace:"",dispatchDate:"",errors:{}},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated||this.props.history.push("/")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return l.a.createElement("div",{className:"container"},l.a.createElement("div",{style:{marginTop:"4rem"},className:"row"},l.a.createElement("div",{className:"col s8 offset-s2 flex flex-col"},l.a.createElement("div",{className:"col s12"},l.a.createElement("h4",null,l.a.createElement("b",null,"Add Shipment")," below")),l.a.createElement("div",{className:"self-center w-3/4"},l.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.destination,error:e.destination,id:"destination",type:"text",className:L()("",{invalid:e.destination})}),l.a.createElement("label",{htmlFor:"destination"},"Destination"),l.a.createElement("span",{className:"red-text"},e.destination)),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.filledSpace,error:e.filledSpace,id:"filledSpace",type:"text",className:L()("",{invalid:e.filledSpace||e.filledSpaceincorrect})}),l.a.createElement("label",{htmlFor:"password"},"Filled Space"),l.a.createElement("span",{className:"red-text"},e.filledSpace,e.filledSpaceincorrect)),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.availableSpace,error:e.availableSpace,id:"availableSpace",type:"text",className:L()("",{invalid:e.availableSpace||e.availableSpaceincorrect})}),l.a.createElement("label",{htmlFor:"password"},"Available Space"),l.a.createElement("span",{className:"red-text"},e.availableSpace,e.availableSpaceincorrect)),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.dispatchDate,error:e.dispatchDate,id:"dispatchDate",type:"date",className:L()("",{invalid:e.dispatchDate||e.dispatchDateincorrect})}),l.a.createElement("label",{htmlFor:"password"},"Dispatch Date"),l.a.createElement("span",{className:"red-text"},e.dispatchDate,e.dispatchDateincorrect)),l.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},l.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hover:shadow-lg hover:bg-green-700 bg-green-600 accent-3"},"Submit")))))))}}]),a}(n.Component),G=Object(E.b)((function(e){return{auth:e.auth,errors:e.errors}}),{addShipment:function(e,t){return function(a){v.a.post("/api/shipment/add",e).then((function(e){t.push("/dashboard")})).catch((function(e){a({type:"GET_ERRORS",payload:e.response.data})}))}}})(P),M=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.heading,a=e.details,n=e.details2,r=e.details3;return l.a.createElement("div",{class:"max-w-xs rounded overflow-hidden shadow-lg my-2"},l.a.createElement("img",{class:"w-full",src:"https://tailwindcss.com/img/card-top.jpg",alt:"Sunset in the mountains"}),l.a.createElement("div",{class:"px-6 py-4 bg-gray-300"},l.a.createElement("div",{class:"font-bold text-xl mb-2"},t),l.a.createElement("div",{class:"flex justify-around px-2 py-2"},l.a.createElement("div",{class:"bg-gray-200 p-2"},"Available Space"),l.a.createElement("p",{class:"text-grey-darker text-base p-2"},a)),l.a.createElement("div",{class:"flex justify-around px-2 py-2"},l.a.createElement("div",{class:"bg-gray-200 p-2"},"Filled Space"),l.a.createElement("p",{class:"text-grey-darker text-base p-2"},n))),l.a.createElement("div",{class:"px-6 py-4"},l.a.createElement("span",{class:"inline-block bg-grey-lighter rounded-full px-3 py-1 text-sm font-semibold text-grey-darker mr-2"},r.slice(0,10))))}}]),a}(n.Component),V=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){console.log("SD=",this.props),this.props.auth.isAuthenticated||this.props.history.push("/"),this.props.listShipments(),console.log(this.props.shipments)}},{key:"componentDidUpdate",value:function(){console.log("Hey=",this.props)}},{key:"render",value:function(){var e=this.props.shipments.shipments;return l.a.createElement("div",{id:"shipmentList",className:""},e?l.a.createElement("div",{style:{marginTop:"4rem"},className:"row"},l.a.createElement("div",{className:"col s8 offset-s2 flex flex-col"},l.a.createElement("div",{className:"col s12"},l.a.createElement("h4",null,l.a.createElement("b",null,"Ongoing Shipments")),null!==e?l.a.createElement("ul",{className:"flex flex-row justify-evenly py-20"},e.map((function(e){return l.a.createElement("li",{key:e.destination,className:"px-5"},l.a.createElement(M,{heading:e.destination,details:e.filledSpace,details2:e.availableSpace,details3:e.dispatchDate}))}))):l.a.createElement(l.a.Fragment,null,l.a.createElement("b",null,"No ongoing shipments found"))))):l.a.createElement(l.a.Fragment,null,l.a.createElement("b",null,"Show Loader")))}}]),a}(n.Component),W=Object(E.b)((function(e){return console.log("State=",e),{auth:e.auth,shipments:e.shipments}}),{listShipments:function(){return function(e){v.a.post("/api/shipment/list").then((function(t){console.log("Success API call"),e({type:"SET_ACTIVE_SHIPMENTS",payload:t.data})})).catch((function(t){console.log("error",t),e({type:"USER_LOADING",payload:t.response.data})}))}}})(V),q=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(F.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={name:e.state.name,email:e.state.email,password:e.state.password,password2:e.state.password2};console.log(a),e.props.registerUser(a,e.props.history)},e.state={name:"",email:"",password:"",password2:"",errors:{}},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return l.a.createElement("div",{className:"container"},l.a.createElement("div",{style:{marginTop:"4rem"},className:"row"},l.a.createElement("div",{className:"col s8 offset-s2 flex flex-col"},l.a.createElement("div",{className:"col s12"},l.a.createElement("h4",null,l.a.createElement("b",null,"Register")," below"),l.a.createElement("p",{className:"grey-text text-darken-1"},"Already have an account? ",l.a.createElement(p.b,{to:"/login"},l.a.createElement("b",null,"Log in")))),l.a.createElement("div",{className:"self-center w-3/4"},l.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.name,error:e.name,id:"name",type:"text",className:L()("",{invalid:e.name})}),l.a.createElement("label",{htmlFor:"name"},"Name"),l.a.createElement("span",{className:"red-text"},e.name)),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:L()("",{invalid:e.email})}),l.a.createElement("label",{htmlFor:"email"},"Email"),l.a.createElement("span",{className:"red-text"},e.email)),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:L()("",{invalid:e.password})}),l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("span",{className:"red-text"},e.password)),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{onChange:this.onChange,value:this.state.password2,error:e.password2,id:"password2",type:"password",className:L()("",{invalid:e.password2})}),l.a.createElement("label",{htmlFor:"password2"},"Confirm Password"),l.a.createElement("span",{className:"red-text"},e.password2)),l.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},l.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hover:shadow-lg hover:bg-green-700 bg-green-600 accent-3"},"Sign up")))))))}}]),a}(n.Component),z=Object(E.b)((function(e){return{auth:e.auth,errors:e.errors}}),{registerUser:function(e,t){return function(a){v.a.post("/api/users/register",e).then((function(e){t.push("/login")})).catch((function(e){a({type:"GET_ERRORS",payload:e.response.data})}))}}})(Object(d.h)(q)),B=a(40),H=Object(E.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,n=Object(B.a)(e,["component","auth"]);return l.a.createElement(d.b,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?l.a.createElement(t,e):l.a.createElement(d.a,{to:"/login"})}}))})),J=a(41),$=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.heading,a=e.icon,n=e.onClick,r=e.classes;return l.a.createElement("button",{type:"submit",onClick:n,className:"w-48 ".concat(""===r?r:"")},l.a.createElement("div",{className:"w-full h-full"},l.a.createElement("div",{className:"relative rounded-sm shadow-md bg-green-500 p-2"}),l.a.createElement("div",{className:"bg-green-400 p-8 border-8"},l.a.createElement("i",{className:"py-2 material-icons align-middle flex flex-col"},a),l.a.createElement("div",{className:"pb-4"},t)),l.a.createElement("div",{className:"rounded-sm shadow-md bg-green-500 p-2"})))}}]),a}(n.Component),K=function(e){return l.a.createElement("div",{id:"form-component",className:"fixed flex w-full h-full items-center justify-center"},l.a.createElement("div",{className:"absolute inset-0 bg-opacity-50 bg-gray-400"}),l.a.createElement("div",{className:"bg-white z-40 max-h-screen overflow-scroll rounded-lg p-4 m-4",style:{width:"400px"}},l.a.createElement("form",{onSubmit:function(){console.log("hello"),e.onClose()},onReset:function(){e.onClose()}},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{error:"Required",id:"destination",type:"text"}),l.a.createElement("label",{htmlFor:"name"},"Destination")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{error:"Required",id:"vehicle",type:"text"}),l.a.createElement("label",{htmlFor:"email"},"Vehicle")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{error:"Required",id:"emptySpace",type:"text"}),l.a.createElement("label",{htmlFor:"password"},"Available Space (12x20x20)")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{error:"Required",id:"filledSpace",type:"text"}),l.a.createElement("label",{htmlFor:"password2"},"Filled Space (12x20x20)")),l.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},l.a.createElement("button",{style:{width:"100px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem",marginBottom:"2rem"},type:"submit",className:"btn btn-large waves-effect waves-light hover:shadow-lg hover:bg-green-700 bg-green-600 text-sm accent-3"},"Add"),l.a.createElement("button",{style:{borderRadius:"3px",marginTop:"1rem",marginBottom:"2rem"},type:"reset",className:"btn btn-large ml-2 waves-effect waves-light hover:shadow-lg hover:bg-gray-400 bg-gray-200 text-gray-800 text-sm accent-3"},"Cancel")))))},Q=Object(E.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.auth.user,a=Object(n.useState)(!1),r=Object(J.a)(a,2),s=r[0],c=r[1],i=Object(d.g)(),o=function(e){i.push(e)};return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12 center-align"},l.a.createElement("h4",null,l.a.createElement("div",{className:"m-4"},l.a.createElement("b",null,"Hey,")," ",t.name.split(" ")[0]),l.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"Successfully logged into"," ",l.a.createElement("span",{style:{fontFamily:"monospace"}},"truck-truck-go"))),l.a.createElement("div",{className:"flex flex-row flex-shrink w-full justify-evenly py-20 text-2xl md:text-sm"},l.a.createElement($,{icon:"library_add",heading:"Add New Shipment",onClick:function(){o("/add-shipment")},className:"m-2 w-1/5"}),l.a.createElement($,{icon:"list_alt",heading:"View Ongoing Shipments",onClick:function(){o("/shipment-list")},className:"m-2 w-1/5"}))),s&&l.a.createElement(K,{onClose:function(){c(!1)}}))}));if(localStorage.jwtToken){var X=localStorage.jwtToken;b(X);var Y=Object(u.a)(X);R.dispatch(f(Y));var Z=Date.now()/1e3;Y.exp<Z&&(R.dispatch(g()),window.location.href="./login")}var ee=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement(E.a,{store:R},l.a.createElement(p.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(D,null),l.a.createElement(d.b,{exact:!0,path:"/",component:A}),l.a.createElement(d.b,{exact:!0,path:"/register",component:z}),l.a.createElement(d.b,{exact:!0,path:"/login",component:I}),l.a.createElement(d.d,null,l.a.createElement(H,{exact:!0,path:"/dashboard",component:Q}),l.a.createElement(H,{exect:!0,path:"/add-shipment",component:G}),l.a.createElement(H,{exect:!0,path:"/shipment-list",component:W})))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.ee2d237d.chunk.js.map